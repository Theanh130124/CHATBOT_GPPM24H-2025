{% extends 'layout/base.html' %}

{% block title %}Chatbot T∆∞ V·∫•n Da Li·ªÖu{% endblock %}

{% block additional_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/chatbot.css') }}">
{% endblock %}

{% block content %}
<div class="chatbot-wrapper">
    <!-- Remove the sidebar toggle button -->
    
    <!-- Modernized chat history sidebar - Always visible -->
    <aside class="chatbot-sidebar" id="chatbot-sidebar">
        <div class="sidebar-header">
            <h3 class="sidebar-title">
                <i class="fas fa-comments me-2"></i>L·ªãch S·ª≠ Chat
            </h3>
            <button class="btn-new-chat" id="new-chat-btn" title="Cu·ªôc tr√≤ chuy·ªán m·ªõi">
                <i class="fas fa-plus me-2"></i>New Chat
            </button>
        </div>

        <div class="sidebar-content">
            <div class="chat-history" id="chat-history">
                <!-- Chat history will be populated here -->
                <div class="empty-state">
                    <i class="fas fa-comments"></i>
                    <p>Ch∆∞a c√≥ cu·ªôc tr√≤ chuy·ªán n√†o</p>
                </div>
            </div>
        </div>

        <div class="sidebar-footer">
            <button class="btn-clear-history" id="clear-history-btn" title="X√≥a t·∫•t c·∫£ l·ªãch s·ª≠">
                <i class="fas fa-trash me-2"></i>X√≥a l·ªãch s·ª≠
            </button>
        </div>
    </aside>

    <!-- Main Chat Area - Unchanged -->
    <main class="chatbot-main">
        <div class="chatbot-container">
            <!-- Chat Header -->
            <div class="chat-header">
                <div class="chat-title">
                    <i class="fas fa-robot"></i>
                    <h2>Chatbot T∆∞ V·∫•n Da Li·ªÖu</h2>
                    <span class="badge badge-beta">Beta</span>
                </div>
                <div class="chat-actions">
                    <button class="action-btn" id="theme-toggle" title="Chuy·ªÉn ƒë·ªïi ch·∫ø ƒë·ªô s√°ng/t·ªëi">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="action-btn" id="clear-chat" title="X√≥a cu·ªôc tr√≤ chuy·ªán hi·ªán t·∫°i">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="action-btn" id="info-btn" title="Th√¥ng tin">
                        <i class="fas fa-info-circle"></i>
                    </button>
                </div>
            </div>

            <!-- Messages Area -->
            <div class="chat-messages" id="chat-messages">
                <div class="message bot">
                    <div class="message-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-content">
                        <p><strong>Xin ch√†o! üëã</strong></p>
                        <p>T√¥i l√† chatbot t∆∞ v·∫•n v·ªÅ c√°c v·∫•n ƒë·ªÅ da li·ªÖu. T√¥i c√≥ th·ªÉ gi√∫p b·∫°n v·ªõi:</p>
                        <ul>
                            <li>C√°c b·ªánh da li·ªÖu th∆∞·ªùng g·∫∑p</li>
                            <li>ChƒÉm s√≥c da c∆° b·∫£n</li>
                            <li>ƒêi·ªÅu tr·ªã m·ª•n, n√°m, t√†n nhang</li>
                            <li>D·ªã ·ª©ng da v√† c√°ch x·ª≠ l√Ω</li>
                            <li>L·ªùi khuy√™n v·ªÅ s·∫£n ph·∫©m chƒÉm s√≥c da</li>
                        </ul>
                        <p>H√£y ch·ªçn m·ªôt ch·ªß ƒë·ªÅ b√™n d∆∞·ªõi ho·∫∑c ƒë·∫∑t c√¢u h·ªèi tr·ª±c ti·∫øp!</p>
                        <div class="message-time">B√¢y gi·ªù</div>
                    </div>
                </div>
            </div>

            <!-- Suggestions -->
            <div class="suggestions-container" id="suggestions-container">
                <div class="suggestions-label">G·ª£i √Ω ch·ªß ƒë·ªÅ:</div>
                <div class="suggestions" id="suggestions">
                    <button class="suggestion-btn" data-topic="acne">
                        <i class="fas fa-flask-vial me-2"></i>C√°ch tr·ªã m·ª•n tr·ª©ng c√°
                    </button>
                    <button class="suggestion-btn" data-topic="dry-skin">
                        <i class="fas fa-droplet me-2"></i>ChƒÉm s√≥c da kh√¥
                    </button>
                    <button class="suggestion-btn" data-topic="allergy">
                        <i class="fas fa-exclamation-circle me-2"></i>D·ªã ·ª©ng m·ªπ ph·∫©m
                    </button>
                    <button class="suggestion-btn" data-topic="psoriasis">
                        <i class="fas fa-shield-alt me-2"></i>B·ªánh v·∫£y n·∫øn
                    </button>
                    <button class="suggestion-btn" data-topic="sunscreen">
                        <i class="fas fa-sun me-2"></i>Ch·ªëng n·∫Øng cho da
                    </button>
                </div>
            </div>

            <!-- Input Area -->
            <div class="chat-input-container">
                <div class="input-group">
                    <input 
                        type="text" 
                        class="chat-input" 
                        id="chat-input" 
                        placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n..."
                        autocomplete="off"
                    >
                    <button class="send-button" id="send-button" title="G·ª≠i tin nh·∫Øn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="input-hint">
                    <small>üí° M·∫πo: B·∫°n c√≥ th·ªÉ g·ª≠i h√¨nh ·∫£nh ƒë·ªÉ ph√¢n t√≠ch t√¨nh tr·∫°ng da</small>
                </div>
            </div>
        </div>
    </main>
</div>

<!-- Info Modal - Unchanged -->
<div class="modal fade" id="infoModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-info-circle me-2"></i>V·ªÅ Chatbot
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p><strong>Chatbot T∆∞ V·∫•n Da Li·ªÖu Th√¥ng Minh</strong></p>
                <p>ƒê√¢y l√† m·ªôt c√¥ng c·ª• h·ªó tr·ª£ t∆∞ v·∫•n v·ªÅ c√°c v·∫•n ƒë·ªÅ da li·ªÖu d·ª±a tr√™n tr√≠ tu·ªá nh√¢n t·∫°o.</p>
                <div class="alert alert-info">
                    <strong>‚ö†Ô∏è L∆∞u √Ω:</strong> Chatbot n√†y ch·ªâ cung c·∫•p th√¥ng tin tham kh·∫£o. 
                    Vui l√≤ng tham kh·∫£o √Ω ki·∫øn b√°c sƒ© chuy√™n khoa da li·ªÖu ƒë·ªÉ c√≥ ch·∫©n ƒëo√°n ch√≠nh x√°c.
                </div>
                <p><strong>T√≠nh nƒÉng:</strong></p>
                <ul>
                    <li>T∆∞ v·∫•n v·ªÅ c√°c b·ªánh da li·ªÖu</li>
                    <li>G·ª£i √Ω chƒÉm s√≥c da</li>
                    <li>Ph√¢n t√≠ch h√¨nh ·∫£nh da (n·∫øu c√≥)</li>
                    <li>L∆∞u l·ªãch s·ª≠ tr√≤ chuy·ªán</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block additional_js %}
<script src="{{ url_for('static', filename='js/chatbot.js') }}"></script>
{% endblock %}
