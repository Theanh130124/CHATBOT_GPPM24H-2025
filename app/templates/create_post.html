{% extends 'layout/base.html' %}
{% block title %}Tạo bài viết mới{% endblock %}

{% block content %}
<div class="create-post-bg py-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8 col-xl-7">
        <div class="card shadow-sm border-0 rounded-4 create-post-card p-4">
          <h2 class="fw-bold mb-4 text-primary">
            <i class="bi bi-pencil-square me-2"></i> Tạo bài viết mới
          </h2>

          <form method="POST" enctype="multipart/form-data" id="createPostForm">
            <!-- Tiêu đề -->
            <div class="mb-3">
              <label class="form-label fw-semibold">Tiêu đề bài viết</label>
              <input type="text" name="title" placeholder="Nhập tiêu đề..."
                     class="form-control form-control-lg rounded-3" required>
            </div>

            <!-- Nội dung -->
            <div class="mb-3">
              <label class="form-label fw-semibold">Nội dung</label>
              <textarea name="content" placeholder="Viết nội dung bài viết..."
                        class="form-control rounded-3" rows="6" required></textarea>
            </div>

            <!-- Ảnh minh hoạ -->
            <div class="mb-3">
  <label class="form-label fw-semibold">Ảnh minh hoạ</label>
  <input type="file" name="images" accept="image/*" class="form-control" id="imageInput" multiple>
  <div class="mt-3" id="imagePreviewContainer" style="display:flex; gap:10px; flex-wrap:wrap;"></div>
</div>

            <!-- Nút -->
            <div class="text-end">
              <button type="submit" class="btn btn-primary px-4 py-2 rounded-pill">
                <i class="bi bi-upload me-2"></i>Đăng bài
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
/* Nền tổng thể */
.create-post-bg {
  background-color: #f4f6fb;
  min-height: 100vh;
  padding-left: 180px !important; /* tránh bị đè bởi sidebar */
}

/* Card form */
.create-post-card {
  background-color: #ffffff;
  border-radius: 16px;
}

/* Label & input */
.form-label {
  color: #003f9e;
  font-weight: 600;
}

.form-control {
  border: 1.5px solid #dee3ef;
  box-shadow: none;
  transition: all 0.2s ease;
}

.form-control:focus {
  border-color: #0d6efd;
  box-shadow: 0 0 0 3px rgba(13,110,253,0.15);
}

/* Nút đăng bài */
.btn-primary {
  background-color: #0d6efd;
  border: none;
  font-weight: 500;
  transition: all 0.25s ease;
}
.btn-primary:hover {
  background-color: #0056d2;
  transform: translateY(-1px);
}

/* Ảnh preview */
#imagePreviewContainer {
  background-color: #f8faff;
  border: 1px dashed #b8c5e0;
  padding: 10px;
  border-radius: 10px;
}
</style>

<script>
document.getElementById("imageInput").addEventListener("change", function(event) {
  const files = event.target.files;
  const container = document.getElementById("imagePreviewContainer");
  container.innerHTML = "";

  if (files.length > 0) {
    for (const file of files) {
      const img = document.createElement("img");
      img.src = URL.createObjectURL(file);
      img.classList.add("img-thumbnail");
      img.style.height = "120px";
      img.style.objectFit = "cover";
      container.appendChild(img);
    }
    container.style.display = "flex";
  } else {
    container.style.display = "none";
  }
});
</script>
{% endblock %}
